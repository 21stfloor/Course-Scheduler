{% extends "admin/base_site.html" %}
{% load i18n admin_urls static admin_list %}


{% block extrastyle %}
  {{ block.super }}
  <link rel="stylesheet" href="{% static "admin/css/changelists.css" %}">
  {% if cl.formset %}
    <link rel="stylesheet" href="{% static "admin/css/forms.css" %}">
  {% endif %}
  {% if cl.formset or action_form %}
    <script src="{% url 'admin:jsi18n' %}"></script>
  {% endif %}
  {{ media.css }}
  {% if not actions_on_top and not actions_on_bottom %}
    <style>
      #changelist table thead th:first-child {width: inherit}
    </style>
  {% endif %}
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
{% endblock %}


{% block extrahead %}
{{ block.super }}
{{ media.js }}
<script src="{% static 'admin/js/filters.js' %}" defer></script>
{% endblock %}

{% block bodyclass %}{{ block.super }} app-{{ opts.app_label }} model-{{ opts.model_name }} change-list{% endblock %}

{% if not is_popup %}
{% block breadcrumbs %}
<div class="breadcrumbs">
<a href="{% url 'admin:index' %}">{% translate 'Home' %}</a>
&rsaquo; <a href="{% url 'admin:app_list' app_label=cl.opts.app_label %}">{{ cl.opts.app_config.verbose_name }}</a>
&rsaquo; {{ cl.opts.verbose_name_plural|capfirst }}
</div>
{% endblock %}
{% endif %}

{% block coltype %}{% endblock %}

{% block content %}
  <div id="content-main">
    {% block object-tools %}
        <ul class="object-tools">
          {% block object-tools-items %}
            {% change_list_object_tools %}
          {% endblock %}
        </ul>
    {% endblock %}
    {% if cl.formset and cl.formset.errors %}
        <p class="errornote">
        {% blocktranslate count counter=cl.formset.total_error_count %}Please correct the error below.{% plural %}Please correct the errors below.{% endblocktranslate %}
        </p>
        {{ cl.formset.non_form_errors }}
    {% endif %}

        <div class="module{% if cl.has_filters %} filtered{% endif %}" id="changelist">
        <div class="changelist-form-container">
            {% block search %}{% search_form cl %}{% endblock %}
            {% block date_hierarchy %}{% if cl.date_hierarchy %}{% date_hierarchy cl %}{% endif %}{% endblock %}

            <form id="changelist-form" method="post"{% if cl.formset and cl.formset.is_multipart %} enctype="multipart/form-data"{% endif %} novalidate>{% csrf_token %}
            {% if cl.formset %}
            <div>{{ cl.formset.management_form }}</div>
            {% endif %}

            {% block result_list %}
            {% if action_form and actions_on_top and cl.show_admin_actions %}{% admin_actions %}{% endif %}
            {% result_list cl %}
            {% if action_form and actions_on_bottom and cl.show_admin_actions %}{% admin_actions %}{% endif %}
            {% endblock %}
            {% block pagination %}{% pagination cl %}{% endblock %}
            </form>
            <!-- course table -->
            {% if cl.opts.app_label == 'schedulerpages' and cl.opts.model_name == 'course' and user.is_superuser %}
              {% load render_table from django_tables2 %}
              <div class="table-responsive">
                  {% render_table table %}
              </div>
            <!-- end course table -->
            <!-- schedule table -->
            {% elif cl.opts.app_label == 'schedulerpages' and cl.opts.model_name == 'schedule' and user.is_staff and not user.is_superuser %}
<!--            {% load render_table from django_tables2 %}-->
<!--            {% comment %} <form id="course-filter-form" method="get" action="{% url 'admin:schedulerpages_schedule_changelist' %}">-->
<!--              <div class="form-group">-->
<!--                <label for="department">Department:</label>-->
<!--                <select class="form-control" id="department" name="department">-->
<!--                  <option value="">All</option>-->
<!--                  {% for department in departments %}-->
<!--                  <br>-->
<!--                  <option value="{{ department.id }}">{{ department.department_name }}</option>-->
<!--                  {% endfor %}-->
<!--                </select>-->
<!--              </div>-->
<!--              <br>-->
<!--              <button type="submit" class="btn btn-primary">Apply Filter</button>-->
<!--            </form> {% endcomment %}-->
            
                <div class="table-responsive">
                    {% comment %}{% render_table schedule_table %} {% endcomment %}
                    <table class="table table-bordered">
                      <thead>
                        <tr>
                          <th scope="col">Time</th>
                          <th scope="col">Monday</th>
                          <th scope="col">Tuesday</th>
                          <th scope="col">Wednesday</th>
                          <th scope="col">Thursday</th>
                          <th scope="col">Friday</th>
                          <th scope="col">Saturday</th>
                        </tr>
                      </thead>
                      <tbody>
                        <tr>
                          <th scope="row" class="sched" data-start="7:00 am" data-end="7:30 am" data-startNoon="AM" data-endNoon="AM">7:00 a.m. - 7:30 a.m.</th>
                          <td></td>
                          <td></td>
                          <td></td>
                          <td></td>
                          <td></td>
                          <td></td>
                        </tr>
                        <tr>
                          <th scope="row" class="sched" data-start="7:30 am" data-end="8:00 am" data-startNoon="AM" data-endNoon="AM">7:30 a.m. - 8:00 a.m.</th>
                          <td></td>
                          <td></td>
                          <td></td>
                          <td></td>
                          <td></td>
                          <td></td>
                        </tr>
                        <tr>
                          <th scope="row" class="sched" data-start="8:00 am" data-end="8:30 am" data-startNoon="AM" data-endNoon="AM">8:00 a.m. - 8:30 a.m.</th>
                          <td></td>
                          <td></td>
                          <td></td>
                          <td></td>
                          <td></td>
                          <td></td>
                        </tr>
                        <tr>
                          <th scope="row" class="sched" data-start="8:30 am" data-end="9:00 am" data-startNoon="AM" data-endNoon="AM">8:30 a.m. - 9:00 a.m.</th>
                          <td></td>
                          <td></td>
                          <td></td>
                          <td></td>
                          <td></td>
                          <td></td>
                        </tr>
                        <tr>
                          <th scope="row" class="sched" data-start="9:00 am" data-end="9:30 am" data-startNoon="AM" data-endNoon="AM">9:00 a.m. - 9:30 a.m.</th>
                          <td></td>
                          <td></td>
                          <td></td>
                          <td></td>
                          <td></td>
                          <td></td>
                        </tr>
                        <tr>
                          <th scope="row" class="sched" data-start="9:30 am" data-end="10:00 am" data-startNoon="AM" data-endNoon="AM">9:30 a.m. - 10:00 a.m.</th>
                          <td></td>
                          <td></td>
                          <td></td>
                          <td></td>
                          <td></td>
                          <td></td>
                        </tr>
                        <tr>
                          <th scope="row" class="sched" data-start="10:00 am" data-end="10:30 am" data-startNoon="AM" data-endNoon="AM">10:00 a.m. - 10:30 a.m.</th>
                          <td></td>
                          <td></td>
                          <td></td>
                          <td></td>
                          <td></td>
                          <td></td>
                        </tr>
                        <tr>
                          <th scope="row" class="sched" data-start="10:30 am" data-end="11:00 am" data-startNoon="AM" data-endNoon="AM">10:30 a.m. - 11:00 a.m.</th>
                          <td></td>
                          <td></td>
                          <td></td>
                          <td></td>
                          <td></td>
                          <td></td>
                        </tr>
                        <tr>
                          <th scope="row" class="sched" data-start="11:00 am" data-end="11:30 am" data-startNoon="AM" data-endNoon="AM">11:00 a.m. - 11:30 a.m.</th>
                          <td></td>
                          <td></td>
                          <td></td>
                          <td></td>
                          <td></td>
                          <td></td>
                        </tr>
                        <tr>
                          <th scope="row" class="sched" data-start="11:30 am" data-end="12:00 pm" data-startNoon="AM" data-endNoon="PM">11:30 a.m. - 12:00  p.m.</th>
                          <td></td>
                          <td></td>
                          <td></td>
                          <td></td>
                          <td></td>
                          <td></td>
                        </tr>
                        <tr>
                          <th scope="row">12:00 p.m. - 1:00 p.m.</th>
                          <td colspan="6" class="text-center"><b>Lunch Break</b></td>
                        </tr>
                        <tr>
                          <th scope="row" class="sched" data-start="1:00 pm" data-end="1:30 pm" data-startNoon="PM" data-endNoon="PM">1:00 p.m. - 1:30 p.m.</th>
                          <td></td>
                          <td></td>
                          <td></td>
                          <td></td>
                          <td></td>
                          <td></td>
                        </tr>
                        <tr>
                          <th scope="row" class="sched" data-start="1:30 pm" data-end="2:00 pm" data-startNoon="PM" data-endNoon="PM">1:30 p.m. - 2:00 p.m.</th>
                          <td></td>
                          <td></td>
                          <td></td>
                          <td></td>
                          <td></td>
                          <td></td>
                        </tr>
                        <tr>
                          <th scope="row" class="sched" data-start="2:00 pm" data-end="2:30 pm" data-startNoon="PM" data-endNoon="PM">2:00 p.m. - 2:30 p.m.</th>
                          <td></td>
                          <td></td>
                          <td></td>
                          <td></td>
                          <td></td>
                          <td></td>
                        </tr>
                        <tr>
                          <th scope="row" class="sched" data-start="2:30 pm" data-end="3:00 pm" data-startNoon="PM" data-endNoon="PM">2:30 p.m. - 3:00 p.m.</th>
                          <td></td>
                          <td></td>
                          <td></td>
                          <td></td>
                          <td></td>
                          <td></td>
                        </tr>
                        <tr>
                          <th scope="row" class="sched" data-start="3:00 pm" data-end="3:30 pm" data-startNoon="PM" data-endNoon="PM">3:00 p.m. - 3:30 p.m.</th>
                          <td></td>
                          <td></td>
                          <td></td>
                          <td></td>
                          <td></td>
                          <td></td>
                        </tr>
                        <tr>
                          <th scope="row" class="sched" data-start="3:30 pm" data-end="4:00 pm" data-startNoon="PM" data-endNoon="PM">3:30 p.m. - 4:00 p.m.</th>
                          <td></td>
                          <td></td>
                          <td></td>
                          <td></td>
                          <td></td>
                          <td></td>
                        </tr>
                        <tr>
                          <th scope="row" class="sched" data-start="4:00 pm" data-end="4:30 pm" data-startNoon="PM" data-endNoon="PM">4:00 p.m. - 4:30 p.m.</th>
                          <td></td>
                          <td></td>
                          <td></td>
                          <td></td>
                          <td></td>
                          <td></td>
                        </tr>
                        <tr>
                          <th scope="row" class="sched" data-start="4:30 pm" data-end="5:00 pm" data-startNoon="PM" data-endNoon="PM">4:30 p.m. - 5:00 p.m.</th>
                          <td></td>
                          <td></td>
                          <td></td>
                          <td></td>
                          <td></td>
                          <td></td>
                        </tr>
                        <tr>
                          <th scope="row" class="sched" data-start="5:00 pm" data-end="5:30 pm" data-startNoon="PM" data-endNoon="PM">5:00 p.m. - 5:30 p.m.</th>
                          <td></td>
                          <td></td>
                          <td></td>
                          <td></td>
                          <td></td>
                          <td></td>
                        </tr>
                        <tr>
                          <th scope="row" class="sched" data-start="5:30 pm" data-end="6:00 pm" data-startNoon="PM" data-endNoon="PM">5:30 p.m. - 6:00 p.m.</th>
                          <td></td>
                          <td></td>
                          <td></td>
                          <td></td>
                          <td></td>
                          <td></td>
                        </tr>
                        <tr>
                          <th scope="row" class="sched" data-start="6:00 pm" data-end="6:30 pm" data-startNoon="PM" data-endNoon="PM">6:00 p.m. - 6:30 p.m.</th>
                          <td></td>
                          <td></td>
                          <td></td>
                          <td></td>
                          <td></td>
                          <td></td>
                        </tr>
                        <tr>
                          <th scope="row" class="sched" data-start="6:30 pm" data-end="7:00 pm" data-startNoon="PM" data-endNoon="PM">6:30 p.m. - 7:00 p.m.</th>
                          <td></td>
                          <td></td>
                          <td></td>
                          <td></td>
                          <td></td>
                          <td></td>
                        </tr>
                        <tr>
                          <th scope="row" class="sched" data-start="7:00 pm" data-end="7:30 pm" data-startNoon="PM" data-endNoon="PM">7:00 p.m. - 7:30 p.m.</th>
                          <td></td>
                          <td></td>
                          <td></td>
                          <td></td>
                          <td></td>
                          <td></td>
                        </tr>
                        <tr>
                          <th scope="row" class="sched" data-start="7:30 pm" data-end="8:00 pm" data-startNoon="PM" data-endNoon="PM">7:30 p.m. - 8:00 p.m.</th>
                          <td></td>
                          <td></td>
                          <td></td>
                          <td></td>
                          <td></td>
                          <td></td>
                        </tr>

                      </tbody>
                </div>
                <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
                <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.29.1/moment.min.js"></script>
                <script>
                  var instructors = [
                    {% for instructor in instructor_schedule %}
                      {
                        "id": "{{ instructor.id }}",
                        "course": "{{ instructor.course|safe }}",
                        "room": "{{ instructor.room }}",
                        "day": "{{ instructor.day }}",
                        "time_start": "{{ instructor.time_start }}",
                        "time_end": "{{ instructor.time_end }}",
                      },
                    {% endfor %}
                  ];

                  // const days = ['Mon', 'Tues', 'Wed', 'Thurs', 'Fri', 'Sat'];

                  console.table(instructors);

                  $(document).ready(function() {
                    var selectedInstructorIndex = -1;
                    for (var i = 0; i < instructors.length; i++) {
                      var dataStart = instructors[i].time_start;
                      var dataEnd = instructors[i].time_end;

                      if (dataStart == 'noon') {
                        dataStart = 12;
                      }

                      if (dataEnd == 'noon') {
                        dataEnd = 12;
                      }

                      var dataStartMoment = moment(dataStart, "hh:mm a");
                      var dataEndMoment = moment(dataEnd, "hh:mm a");

                      $('.sched').each(function() {
                        let thStart = $(this).data('start')
                        let thEnd = $(this).data('end')
                        let thStartNoon = $(this).data('startnoon')
                        let thEndNoon = $(this).data('endnoon')
                        console.log(thStart);
                        console.log(thEnd);
                        console.log(thStartNoon);
                        console.log(thEndNoon);

                        var thStartMoment = moment(thStart, "hh:mm a");
                        var thEndMoment = moment(thEnd, "hh:mm a");

                        if (dataStartMoment.isSameOrBefore(thStartMoment) && dataEndMoment.isSameOrAfter(thEndMoment)) {
                          selectedInstructorIndex = i;

                          var dayInt = instructors[i].day;
                          console.log(dayInt);
                          var thElement = $(this);

                          var tdElements = thElement.closest('tr').find('td');

                          var correspondingTd = tdElements.eq(dayInt);
                          $(correspondingTd).addClass(`selectedTd-${instructors[i].id}`);
                        } else {
                          console.log(dataStart, dataEnd, thStart, thEnd);
                        }
                      });

                      if (selectedInstructorIndex !== -1) {
                        var selectedTdArray = $(`.selectedTd-${instructors[i].id}`);
                        $(selectedTdArray[0]).attr('rowspan', selectedTdArray.length);
                        $(selectedTdArray[0]).append(`<p style="text-align: center;"><b>${instructors[selectedInstructorIndex].course} <br> ${instructors[selectedInstructorIndex].room}</b></p>`);
                        $(selectedTdArray[0]).css("vertical-align", "middle");
                        $(`.selectedTd-${instructors[i].id}:not(:first)`).remove();
                      }
                    }
                  });
                </script>
                <!-- end schedule table -->
            {% elif cl.opts.app_label == 'schedulerpages' and cl.opts.model_name == 'rooms' and user.is_staff and not user.is_superuser %}
                <div class="table-responsive">
                  <form method="POST">
                    {% csrf_token %}
                    <select id="roomFilter" name="roomFilter">
                      <option value="0">All Rooms</option>
                      {% for room in rooms_schedule %}
                          <option value="{{ room.id }}">{{ room.room_name }}</option>
                      {% endfor %}
                    </select>
                    <button type="submit" class="btn btn-primary">Apply Filter</button>
                  </form>
                  {% comment %}{% render_table schedule_table %} {% endcomment %}
                  <table class="table table-bordered">
                    <thead>
                      <tr>
                        <th scope="col">Time</th>
                        <th scope="col">Monday</th>
                        <th scope="col">Tuesday</th>
                        <th scope="col">Wednesday</th>
                        <th scope="col">Thursday</th>
                        <th scope="col">Friday</th>
                        <th scope="col">Saturday</th>
                      </tr>
                    </thead>
                    <tbody>
                      <tr>
                        <th scope="row" class="sched" data-start="7:00 am" data-end="7:30 am" data-startNoon="AM" data-endNoon="AM">7:00 a.m. - 7:30 a.m.</th>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td></td>
                      </tr>
                      <tr>
                        <th scope="row" class="sched" data-start="7:30 am" data-end="8:00 am" data-startNoon="AM" data-endNoon="AM">7:30 a.m. - 8:00 a.m.</th>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td></td>
                      </tr>
                      <tr>
                        <th scope="row" class="sched" data-start="8:00 am" data-end="8:30 am" data-startNoon="AM" data-endNoon="AM">8:00 a.m. - 8:30 a.m.</th>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td></td>
                      </tr>
                      <tr>
                        <th scope="row" class="sched" data-start="8:30 am" data-end="9:00 am" data-startNoon="AM" data-endNoon="AM">8:30 a.m. - 9:00 a.m.</th>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td></td>
                      </tr>
                      <tr>
                        <th scope="row" class="sched" data-start="9:00 am" data-end="9:30 am" data-startNoon="AM" data-endNoon="AM">9:00 a.m. - 9:30 a.m.</th>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td></td>
                      </tr>
                      <tr>
                        <th scope="row" class="sched" data-start="9:30 am" data-end="10:00 am" data-startNoon="AM" data-endNoon="AM">9:30 a.m. - 10:00 a.m.</th>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td></td>
                      </tr>
                      <tr>
                        <th scope="row" class="sched" data-start="10:00 am" data-end="10:30 am" data-startNoon="AM" data-endNoon="AM">10:00 a.m. - 10:30 a.m.</th>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td></td>
                      </tr>
                      <tr>
                        <th scope="row" class="sched" data-start="10:30 am" data-end="11:00 am" data-startNoon="AM" data-endNoon="AM">10:30 a.m. - 11:00 a.m.</th>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td></td>
                      </tr>
                      <tr>
                        <th scope="row" class="sched" data-start="11:00 am" data-end="11:30 am" data-startNoon="AM" data-endNoon="AM">11:00 a.m. - 11:30 a.m.</th>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td></td>
                      </tr>
                      <tr>
                        <th scope="row" class="sched" data-start="11:30 am" data-end="12:00 pm" data-startNoon="AM" data-endNoon="PM">11:30 a.m. - 12:00  p.m.</th>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td></td>
                      </tr>
                      <tr>
                        <th scope="row">12:00 p.m. - 1:00 p.m.</th>
                        <td colspan="6" class="text-center"><b>Lunch Break</b></td>
                      </tr>
                      <tr>
                        <th scope="row" class="sched" data-start="1:00 pm" data-end="1:30 pm" data-startNoon="PM" data-endNoon="PM">1:00 p.m. - 1:30 p.m.</th>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td></td>
                      </tr>
                      <tr>
                        <th scope="row" class="sched" data-start="1:30 pm" data-end="2:00 pm" data-startNoon="PM" data-endNoon="PM">1:30 p.m. - 2:00 p.m.</th>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td></td>
                      </tr>
                      <tr>
                        <th scope="row" class="sched" data-start="2:00 pm" data-end="2:30 pm" data-startNoon="PM" data-endNoon="PM">2:00 p.m. - 2:30 p.m.</th>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td></td>
                      </tr>
                      <tr>
                        <th scope="row" class="sched" data-start="2:30 pm" data-end="3:00 pm" data-startNoon="PM" data-endNoon="PM">2:30 p.m. - 3:00 p.m.</th>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td></td>
                      </tr>
                      <tr>
                        <th scope="row" class="sched" data-start="3:00 pm" data-end="3:30 pm" data-startNoon="PM" data-endNoon="PM">3:00 p.m. - 3:30 p.m.</th>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td></td>
                      </tr>
                      <tr>
                        <th scope="row" class="sched" data-start="3:30 pm" data-end="4:00 pm" data-startNoon="PM" data-endNoon="PM">3:30 p.m. - 4:00 p.m.</th>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td></td>
                      </tr>
                      <tr>
                        <th scope="row" class="sched" data-start="4:00 pm" data-end="4:30 pm" data-startNoon="PM" data-endNoon="PM">4:00 p.m. - 4:30 p.m.</th>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td></td>
                      </tr>
                      <tr>
                        <th scope="row" class="sched" data-start="4:30 pm" data-end="5:00 pm" data-startNoon="PM" data-endNoon="PM">4:30 p.m. - 5:00 p.m.</th>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td></td>
                      </tr>
                      <tr>
                        <th scope="row" class="sched" data-start="5:00 pm" data-end="5:30 pm" data-startNoon="PM" data-endNoon="PM">5:00 p.m. - 5:30 p.m.</th>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td></td>
                      </tr>
                      <tr>
                        <th scope="row" class="sched" data-start="5:30 pm" data-end="6:00 pm" data-startNoon="PM" data-endNoon="PM">5:30 p.m. - 6:00 p.m.</th>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td></td>
                      </tr>
                      <tr>
                        <th scope="row" class="sched" data-start="6:00 pm" data-end="6:30 pm" data-startNoon="PM" data-endNoon="PM">6:00 p.m. - 6:30 p.m.</th>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td></td>
                      </tr>
                      <tr>
                        <th scope="row" class="sched" data-start="6:30 pm" data-end="7:00 pm" data-startNoon="PM" data-endNoon="PM">6:30 p.m. - 7:00 p.m.</th>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td></td>
                      </tr>
                      <tr>
                        <th scope="row" class="sched" data-start="7:00 pm" data-end="7:30 pm" data-startNoon="PM" data-endNoon="PM">7:00 p.m. - 7:30 p.m.</th>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td></td>
                      </tr>
                      <tr>
                        <th scope="row" class="sched" data-start="7:30 pm" data-end="8:00 pm" data-startNoon="PM" data-endNoon="PM">7:30 p.m. - 8:00 p.m.</th>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td></td>
                      </tr>

                    </tbody>
                    </div>
                    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
                    <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.29.1/moment.min.js"></script>
                    <script>
                      // Assuming the roomFilterValue is obtained from the server-side
                      var roomFilterValue = {{ room_filter }}; // Example value
              
                      // Set the default selected option based on roomFilterValue
                      var roomFilterSelect = document.getElementById("roomFilter");
                      for (var i = 0; i < roomFilterSelect.options.length; i++) {
                          if (parseInt(roomFilterSelect.options[i].value) === roomFilterValue) {
                              roomFilterSelect.options[i].selected = true;
                              break;
                          }
                      }
                  </script>
              
                    <script>
                      var instructors = [
                        {% for instructor in instructor_schedule %}
                          {
                            "id": "{{ instructor.id }}",
                            "course": "{{ instructor.course|safe }}",
                            "room": "",
                            "day": "{{ instructor.day }}",
                            "time_start": "{{ instructor.time_start }}",
                            "time_end": "{{ instructor.time_end }}",
                          },
                        {% endfor %}
                      ];

                      // const days = ['Mon', 'Tues', 'Wed', 'Thurs', 'Fri', 'Sat'];

                      console.table(instructors);

                      $(document).ready(function() {
                        var selectedInstructorIndex = -1;
                        for (var i = 0; i < instructors.length; i++) {
                          var dataStart = instructors[i].time_start;
                          var dataEnd = instructors[i].time_end;

                          if (dataStart == 'noon') {
                            dataStart = 12;
                          }

                          if (dataEnd == 'noon') {
                            dataEnd = 12;
                          }

                          var dataStartMoment = moment(dataStart, "hh:mm a");
                          var dataEndMoment = moment(dataEnd, "hh:mm a");

                          $('.sched').each(function() {
                            let thStart = $(this).data('start')
                            let thEnd = $(this).data('end')
                            let thStartNoon = $(this).data('startnoon')
                            let thEndNoon = $(this).data('endnoon')
                            console.log(thStart);
                            console.log(thEnd);
                            console.log(thStartNoon);
                            console.log(thEndNoon);

                            var thStartMoment = moment(thStart, "hh:mm a");
                            var thEndMoment = moment(thEnd, "hh:mm a");

                            if (dataStartMoment.isSameOrBefore(thStartMoment) && dataEndMoment.isSameOrAfter(thEndMoment)) {
                              selectedInstructorIndex = i;

                              var dayInt = instructors[i].day;
                              console.log(dayInt);
                              var thElement = $(this);

                              var tdElements = thElement.closest('tr').find('td');

                              var correspondingTd = tdElements.eq(dayInt);
                              $(correspondingTd).addClass(`selectedTd-${instructors[i].id}`);
                            } else {
                              console.log(dataStart, dataEnd, thStart, thEnd);
                            }
                          });

                          if (selectedInstructorIndex !== -1) {
                            var selectedTdArray = $(`.selectedTd-${instructors[i].id}`);
                            $(selectedTdArray[0]).attr('rowspan', selectedTdArray.length);
                            $(selectedTdArray[0]).append(`<p style="text-align: center;"><b>${instructors[selectedInstructorIndex].course} <br> ${instructors[selectedInstructorIndex].room}</b></p>`);
                            $(selectedTdArray[0]).css("vertical-align", "middle");
                            $(`.selectedTd-${instructors[i].id}:not(:first)`).remove();
                          }
                        }
                      });
                    </script>
            
        {% else %}
        </div>
        {% block filters %}
            {% if cl.has_filters %}
            <div id="changelist-filter">
                <h2>{% translate 'Filter' %}</h2>
                {% if cl.is_facets_optional or cl.has_active_filters %}<div id="changelist-filter-extra-actions">
                {% if cl.is_facets_optional %}<h3>
                    {% if cl.add_facets %}<a href="{{ cl.remove_facet_link }}" class="hidelink">{% translate "Hide counts" %}</a>
                    {% else %}<a href="{{ cl.add_facet_link }}" class="viewlink">{% translate "Show counts" %}</a>{% endif %}
                </h3>{% endif %}
                {% if cl.has_active_filters %}<h3>
                    <a href="{{ cl.clear_all_filters_qs }}">&#10006; {% translate "Clear all filters" %}</a>
                </h3>{% endif %}
                </div>{% endif %}
                {% for spec in cl.filter_specs %}{% admin_list_filter cl spec %}{% endfor %}
            </div>
            {% endif %}
        {% endblock %}
        
        </div>
        {% endif %} 
  </div>
{% endblock %}
